---
title: "4.1 Dockerfileì´ ìˆëŠ”ë° ë¹Œë“œ ì„œë²„ê°€ í•„ìš”í• ê¹Œ?"
categoryPath:
  - "Docker"
  - "4ì¥ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ì½”ë“œì—ì„œ ë„ì»¤ ì´ë¯¸ì§€ê¹Œì§€"
  - "4.1 Dockerfileì´ ìˆëŠ”ë° ë¹Œë“œ ì„œë²„ê°€ í•„ìš”í• ê¹Œ?"
authorNick: "ê´€ë¦¬ì"
createdAt: "2025-08-27"
updateMode: "upsert"
---

# 4.1 Dockerfileì´ ìˆëŠ”ë° ë¹Œë“œ ì„œë²„ê°€ í•„ìš”í• ê¹Œ?

"Dockerfileë§Œ ìˆìœ¼ë©´ ë˜ëŠ”ë° ì™œ ë³µì¡í•œ CI/CD ì„œë²„ê°€ í•„ìš”í• ê¹Œìš”?" 

ê°œë°œìë¼ë©´ í•œ ë²ˆì¯¤ ê°€ì ¸ë´¤ì„ ë²•í•œ ì˜ë¬¸ì…ë‹ˆë‹¤. ë¡œì»¬ì—ì„œ `docker build` ëª…ë ¹ì–´ë¡œ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ”ë°, êµ³ì´ Jenkinsë‚˜ GitHub Actions ê°™ì€ ë³µì¡í•œ ì‹œìŠ¤í…œì´ í•„ìš”í•œì§€ ê¶ê¸ˆí•˜ì‹¤ í…ë°ìš”.

ì´ë²ˆ ì„¹ì…˜ì—ì„œëŠ” **ë¡œì»¬ ë¹Œë“œ**ì™€ **ì„œë²„ ê¸°ë°˜ ë¹Œë“œ**ì˜ ì°¨ì´ì ì„ ì‹¤ì œ ì‚¬ë¡€ë¥¼ í†µí•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## ê°œë°œìì˜ ì¼ë°˜ì ì¸ ê³ ë¯¼

### ìƒí™©: ê°„ë‹¨í•œ Node.js ì• í”Œë¦¬ì¼€ì´ì…˜

ë¨¼ì € ê°„ë‹¨í•œ ì˜ˆì‹œë¡œ ì‹œì‘í•´ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
// app.js
const express = require('express');
const app = express();

app.get('/', (req, res) => {
  res.json({ 
    message: 'Hello Docker!',
    timestamp: new Date().toISOString()
  });
});

app.listen(3000, () => {
  console.log('Server running on port 3000');
});
```

```dockerfile
# Dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["node", "app.js"]
```

### ë¡œì»¬ì—ì„œ ë¹Œë“œí•˜ê¸°

```bash
# ê°„ë‹¨í•˜ê²Œ ë¡œì»¬ì—ì„œ ë¹Œë“œ
docker build -t my-app .
docker run -p 3000:3000 my-app
```

**ê²°ê³¼:**
```
Successfully built abc123def456
Server running on port 3000
```

ì´ë ‡ê²Œ ê°„ë‹¨í•˜ê²Œ ë™ì‘í•˜ë‹ˆê¹Œ "ë¹Œë“œ ì„œë²„ê°€ í•„ìš”í•œê°€?" í•˜ëŠ” ì˜ë¬¸ì´ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/>

## ì‹¤ì œ í˜‘ì—… í™˜ê²½ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤

í•˜ì§€ë§Œ ì‹¤ì œ íŒ€ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì˜ˆìƒì¹˜ ëª»í•œ ë¬¸ì œë“¤ì´ ë°œìƒí•©ë‹ˆë‹¤.

### ë¬¸ì œ 1: "ë‚´ ì»´í“¨í„°ì—ì„œëŠ” ì˜ ë˜ëŠ”ë°..." ì¦í›„êµ°

**ê°œë°œì A (MacBook M1):**
```bash
docker build -t team-app .
# ì„±ê³µ! - ARM64 ì•„í‚¤í…ì²˜ë¡œ ë¹Œë“œë¨
```

**ê°œë°œì B (Windows 10):**
```bash
docker build -t team-app .
# ê²½ê³ : ì¼ë¶€ ì˜ì¡´ì„±ì—ì„œ í˜¸í™˜ì„± ë¬¸ì œ ë°œìƒ
```

**ìš´ì˜ ì„œë²„ (Linux x64):**
```bash
docker run team-app
# ì˜¤ë¥˜: ARM64 ì´ë¯¸ì§€ê°€ x64ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
```

### ë¬¸ì œ 2: ê°œë°œ í™˜ê²½ì˜ ì°¨ì´

| ìš”ì†Œ | ê°œë°œì A | ê°œë°œì B | ë¬¸ì œì  |
|------|----------|----------|--------|
| **Node.js** | v18.17.0 | v16.20.1 | ë²„ì „ ì°¨ì´ë¡œ ì¸í•œ ë¹Œë“œ ê²°ê³¼ ìƒì´ |
| **npm** | 9.6.7 | 8.19.4 | íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë°©ì‹ ì°¨ì´ |
| **Docker** | 24.0.6 | 20.10.21 | ë¹Œë“œ ëª…ë ¹ì–´ ì§€ì› ë²”ìœ„ ì°¨ì´ |

<br/>

## ë¹Œë“œ ì„œë²„ê°€ í•´ê²°í•˜ëŠ” ë¬¸ì œë“¤

### í•´ê²°ì±… 1: í‘œì¤€í™”ëœ ë¹Œë“œ í™˜ê²½

GitHub Actionsë¥¼ ì‚¬ìš©í•œ ì˜ˆì‹œ:

```yaml
# .github/workflows/build.yml
name: í‘œì¤€í™”ëœ Docker ë¹Œë“œ

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest  # í‘œì¤€í™”ëœ í™˜ê²½
    
    steps:
    - name: ì½”ë“œ ì²´í¬ì•„ì›ƒ
      uses: actions/checkout@v3
    
    - name: Docker Buildx ì„¤ì •
      uses: docker/setup-buildx-action@v2
      
    - name: ë©€í‹° í”Œë«í¼ ë¹Œë“œ
      uses: docker/build-push-action@v4
      with:
        context: .
        platforms: linux/amd64,linux/arm64  # í˜¸í™˜ì„± í•´ê²°
        tags: myapp:${{ github.sha }}
        
    - name: í…ŒìŠ¤íŠ¸ ì‹¤í–‰
      run: |
        docker run --rm myapp:${{ github.sha }} npm test
```

### í•´ê²°ì±… 2: ìë™í™”ëœ í’ˆì§ˆ ê²€ì¦

```yaml
    - name: ë³´ì•ˆ ê²€ì‚¬
      uses: anchore/scan-action@v3
      with:
        image: myapp:${{ github.sha }}
        
    - name: ì´ë¯¸ì§€ í¬ê¸° í™•ì¸
      run: |
        SIZE=$(docker images myapp:${{ github.sha }} --format "{{.Size}}")
        echo "ì´ë¯¸ì§€ í¬ê¸°: $SIZE"
        # 100MB ì´ìƒì´ë©´ ê²½ê³ 
        
    - name: ì·¨ì•½ì  ìŠ¤ìº”
      run: |
        docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \
          aquasec/trivy myapp:${{ github.sha }}
```

<br/>

## ì–¸ì œ ì–´ë–¤ ë°©ì‹ì„ ì„ íƒí• ê¹Œ?

### ë¡œì»¬ ë¹Œë“œê°€ ì í•©í•œ ê²½ìš°

#### ì¶”ì²œ ìƒí™©:
- ê°œì¸ í”„ë¡œì íŠ¸ë‚˜ í•™ìŠµìš© í”„ë¡œì íŠ¸
- ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘ì´ í•„ìš”í•  ë•Œ
- ì†Œê·œëª¨ íŒ€ (2-3ëª…)ì˜ ì´ˆê¸° ê°œë°œ ë‹¨ê³„

#### ë¡œì»¬ ë¹Œë“œ ì˜ˆì‹œ:
```bash
# ê°œë°œ ì¤‘ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸
docker build -t my-experiment .
docker run -p 3000:3000 my-experiment

# ì¦‰ì‹œ ê²°ê³¼ í™•ì¸ ê°€ëŠ¥
curl http://localhost:3000
```

### ë¹Œë“œ ì„œë²„ê°€ í•„ìˆ˜ì¸ ê²½ìš°

#### í•„ìˆ˜ ìƒí™©:
- í”„ë¡œë•ì…˜ì— ë°°í¬í•˜ëŠ” ì„œë¹„ìŠ¤
- 4ëª… ì´ìƒì˜ íŒ€ì—ì„œ í˜‘ì—…
- ì—¬ëŸ¬ í”Œë«í¼(Windows, Mac, Linux) ì§€ì› í•„ìš”
- ë³´ì•ˆì´ë‚˜ í’ˆì§ˆ ê²€ì¦ì´ ì¤‘ìš”í•œ í”„ë¡œì íŠ¸

#### ì„œë²„ ë¹Œë“œì˜ ì¥ì :

| ì¥ì  | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| **í‘œì¤€í™”** | ëª¨ë“  ë¹Œë“œê°€ ë™ì¼í•œ í™˜ê²½ì—ì„œ ìˆ˜í–‰ | Ubuntu 20.04, Docker 24.x |
| **ë©€í‹° í”Œë«í¼** | ë‹¤ì–‘í•œ ì•„í‚¤í…ì²˜ ì§€ì› | linux/amd64, linux/arm64 |
| **ìë™í™”** | ì½”ë“œ í‘¸ì‹œì‹œ ìë™ ë¹Œë“œ & í…ŒìŠ¤íŠ¸ | PR ìƒì„±ì‹œ ìë™ ê²€ì¦ |
| **ë³´ì•ˆ** | ìë™ ì·¨ì•½ì  ê²€ì‚¬ | Trivy, Snyk ë“± |

<br/>

## ì‹¤ì „: í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼ë²•

ê°€ì¥ íš¨ìœ¨ì ì¸ ë°©ë²•ì€ **ê°œë°œ ë‹¨ê³„ë³„ë¡œ ë‹¤ë¥¸ ì „ëµ**ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

### 1ë‹¨ê³„: ê°œë°œ ì‹œ (ë¡œì»¬ ë¹Œë“œ)

```bash
# ê°œë°œ ì¤‘ì—ëŠ” ë¹ ë¥¸ í”¼ë“œë°±ì„ ìœ„í•´ ë¡œì»¬ ì‚¬ìš©
docker build -t myapp:dev .
docker run -p 3000:3000 myapp:dev

# ê¸°ëŠ¥ ì™„ì„±ë˜ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ
git add .
git commit -m "ìƒˆë¡œìš´ ê¸°ëŠ¥ ì™„ì„±"
git push origin feature-branch
```

### 2ë‹¨ê³„: Pull Request (CI ë¹Œë“œ)

```yaml
# PR ìƒì„±ì‹œ ìë™ìœ¼ë¡œ ì‹¤í–‰
on:
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - name: ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸
      run: |
        docker build -t myapp:pr-${{ github.event.number }} .
        docker run --rm myapp:pr-${{ github.event.number }} npm test
```

### 3ë‹¨ê³„: ë°°í¬ (CD ë¹Œë“œ)

```yaml
# main ë¸Œëœì¹˜ì— ë³‘í•©ë˜ë©´ í”„ë¡œë•ì…˜ ë°°í¬
on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - name: í”„ë¡œë•ì…˜ ë¹Œë“œ ë° ë°°í¬
      run: |
        docker build --platform linux/amd64,linux/arm64 \
          -t myregistry/myapp:latest .
        docker push myregistry/myapp:latest
```

<br/>

## ì‹¤ìŠµ: ê°œë°œ í™˜ê²½ ìµœì í™”

### Docker Composeë¡œ ë¡œì»¬ ê°œë°œ í™˜ê²½ êµ¬ì„±

ë¡œì»¬ ê°œë°œì„ ë” íš¨ìœ¨ì ìœ¼ë¡œ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤:

```yaml
# docker-compose.dev.yml
version: '3.8'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile.dev
    ports:
      - "3000:3000"
    volumes:
      - .:/app                # ì‹¤ì‹œê°„ ì½”ë“œ ë°˜ì˜
      - /app/node_modules     # node_modulesëŠ” ì»¨í…Œì´ë„ˆ ê²ƒ ì‚¬ìš©
    environment:
      - NODE_ENV=development
      
  db:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: devdb
      POSTGRES_USER: dev
      POSTGRES_PASSWORD: devpass
    ports:
      - "5432:5432"
```

```dockerfile
# Dockerfile.dev - ê°œë°œìš©
FROM node:18-alpine

WORKDIR /app

# ê°œë°œ ë„êµ¬ ì¶”ê°€ ì„¤ì¹˜
RUN apk add --no-cache git vim

COPY package*.json ./
RUN npm install  # ê°œë°œ ì˜ì¡´ì„±ë„ í¬í•¨

# ê°œë°œ ì„œë²„ ì‹¤í–‰ (í•« ë¦¬ë¡œë“œ)
CMD ["npm", "run", "dev"]
```

### ê°œë°œì ì¹œí™”ì  ìŠ¤í¬ë¦½íŠ¸

```bash
# dev-start.sh
#!/bin/bash
echo "ê°œë°œ í™˜ê²½ ì‹œì‘..."

# ê°œë°œ í™˜ê²½ ì‹¤í–‰
docker-compose -f docker-compose.dev.yml up -d

# ì¤€ë¹„ ì™„ë£Œê¹Œì§€ ëŒ€ê¸°
echo "ì„œë²„ ì¤€ë¹„ ëŒ€ê¸° ì¤‘..."
sleep 5

# ìƒíƒœ í™•ì¸
curl -f http://localhost:3000/health && echo "ê°œë°œ ì„œë²„ ì¤€ë¹„ ì™„ë£Œ!"

echo ""
echo "ì• í”Œë¦¬ì¼€ì´ì…˜: http://localhost:3000"
echo "ë°ì´í„°ë² ì´ìŠ¤: localhost:5432"
echo ""
echo "ê°œë°œ ëª…ë ¹ì–´:"
echo "  ë¡œê·¸ ë³´ê¸°: docker-compose -f docker-compose.dev.yml logs -f"
echo "  ì¤‘ì§€: docker-compose -f docker-compose.dev.yml down"
```

<br/>

## ì„±ëŠ¥ ë¹„êµ ê²°ê³¼

ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ ì¸¡ì •í•œ ê²°ê³¼ì…ë‹ˆë‹¤:

### ë¹Œë“œ ì‹œê°„ ë¹„êµ

| ìƒí™© | ë¡œì»¬ ë¹Œë“œ | CI ë¹Œë“œ | ì°¨ì´ì  |
|------|-----------|---------|--------|
| **ì²« ë²ˆì§¸ ë¹Œë“œ** | 3ë¶„ | 5ë¶„ | CIëŠ” í™˜ê²½ ì¤€ë¹„ ì‹œê°„ í¬í•¨ |
| **ìºì‹œ í™œìš©ì‹œ** | 30ì´ˆ | 1ë¶„ 30ì´ˆ | ë¡œì»¬ì´ ë” ë¹ ë¦„ |
| **ì˜ì¡´ì„± ë³€ê²½ì‹œ** | 2ë¶„ | 4ë¶„ | CIëŠ” ë³´ì•ˆ ê²€ì‚¬ í¬í•¨ |

### ì•ˆì •ì„± ë¹„êµ

| ì§€í‘œ | ë¡œì»¬ ë¹Œë“œ | CI ë¹Œë“œ |
|------|-----------|---------|
| **ë¹Œë“œ ì„±ê³µë¥ ** | 85% | 97% |
| **í”Œë«í¼ í˜¸í™˜ì„±** | ì œí•œì  | ì™„ë²½ |
| **ë³´ì•ˆ ê²€ì‚¬** | ìˆ˜ë™ | ìë™ |

<br/>

## í•µì‹¬ ì •ë¦¬

### ë¡œì»¬ ë¹Œë“œ vs ì„œë²„ ë¹Œë“œ

**ë¡œì»¬ ë¹Œë“œì˜ ì¥ì :**
- ë¹ ë¥¸ ê°œë°œ í”¼ë“œë°± ë£¨í”„
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¶ˆí•„ìš”
- ê°œë°œì ê°œì¸ í™˜ê²½ì— ìµœì í™”

**ì„œë²„ ë¹Œë“œì˜ ì¥ì :**
- í‘œì¤€í™”ëœ í™˜ê²½ìœ¼ë¡œ ì¼ê´€ì„± ë³´ì¥
- ë©€í‹° í”Œë«í¼ ì§€ì›
- ìë™í™”ëœ í’ˆì§ˆ ê²€ì¦

### ìµœì ì˜ ì „ëµ

1. **ê°œë°œ ë‹¨ê³„**: ë¡œì»¬ ë¹Œë“œë¡œ ë¹ ë¥¸ ê°œë°œ
2. **í˜‘ì—… ë‹¨ê³„**: PRì‹œ CI ë¹Œë“œë¡œ í’ˆì§ˆ ê²€ì¦
3. **ë°°í¬ ë‹¨ê³„**: CD ì„œë²„ë¡œ ì•ˆì •ì  ë¦´ë¦¬ìŠ¤

> **ê²°ë¡ **: Dockerfileë§Œìœ¼ë¡œë„ ì¶©ë¶„í•˜ì§€ë§Œ, íŒ€ í˜‘ì—…ê³¼ í”„ë¡œë•ì…˜ ë°°í¬ì—ëŠ” ë¹Œë“œ ì„œë²„ê°€ í•„ìˆ˜ì…ë‹ˆë‹¤! ë‹¨ê³„ë³„ë¡œ ì ì ˆí•œ ì „ëµì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

<br/>

## ğŸ® ì—°ìŠµ ë¬¸ì œ

**ë¬¸ì œ 1:** ë¡œì»¬ì—ì„œ Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Dockerë¡œ ë¹Œë“œí•´ë³´ì„¸ìš”.

<details>
<summary><strong>ì •ë‹µ ë³´ê¸°</strong></summary>

```bash
# 1. í”„ë¡œì íŠ¸ í´ë” ìƒì„±
mkdir my-node-app && cd my-node-app

# 2. ê°„ë‹¨í•œ ì•± ìƒì„±
echo 'const express = require("express");
const app = express();
app.get("/", (req, res) => res.send("Hello Docker!"));
app.listen(3000, () => console.log("Server running"));' > app.js

echo '{"name": "my-app", "dependencies": {"express": "^4.18.2"}}' > package.json

# 3. Dockerfile ìƒì„±
echo 'FROM node:18-alpine
WORKDIR /app
COPY package.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["node", "app.js"]' > Dockerfile

# 4. ë¹Œë“œ ë° ì‹¤í–‰
docker build -t my-node-app .
docker run -p 3000:3000 my-node-app
```

</details>

<br/>

**ë¬¸ì œ 2:** GitHub Actionsë¡œ ìë™ ë¹Œë“œ ì›Œí¬í”Œë¡œìš°ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.

<details>
<summary><strong>ì •ë‹µ ë³´ê¸°</strong></summary>

```yaml
# .github/workflows/build.yml
name: Auto Build

on:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Docker ë¹Œë“œ
      run: |
        docker build -t myapp:${{ github.sha }} .
        
    - name: í…ŒìŠ¤íŠ¸ ì‹¤í–‰
      run: |
        docker run --rm myapp:${{ github.sha }} npm test
```

</details>

<br/>

ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” **Java ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ Docker ë¹Œë“œ ìµœì í™”**ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤!