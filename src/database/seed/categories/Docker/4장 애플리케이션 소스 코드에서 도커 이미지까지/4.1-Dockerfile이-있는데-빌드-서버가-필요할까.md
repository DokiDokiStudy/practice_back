---
title: 'Dockerfile이 있는데 빌드 서버가 필요할까'
categoryPath:
  - 'Docker'
  - '4장 애플리케이션 소스 코드에서 도커 이미지까지'
  - '4.1 Dockerfile이 있는데 빌드 서버가 필요할까'
authorNick: '관리자'
createdAt: '2025-08-10'
updateMode: 'upsert'
---

# Dockerfile이 있는데 빌드 서버가 필요할까

팀을 이루어서 개발을 진행하는 경우에 조금 엄격한 전달 절차가 필요한데 깃허브와 같이 팀을 위한 형상 관리 시스템을 사용하면서 코드를 푸시하거나 별도의 서버를 두는 것이 그 예시입니다.

> 이러한 절차는 개발과정에서 생길 수 있는 문제를 빠르게 확인하고 프로젝트를 안전하게 관리할 수 있게 해줍니다.

다만 절차가 복잡할수록 유지보수를 위한 큰 오버헤드가 발생하는데 바로 신규로 팀에 합류한 인원들의 환경설정에 드는 시간 비용이 커지게 됩니다.

> 개발에 사용되는 모든 도구들의 호환성, 버전등이 맞아야 하기 때문에 복잡한 구조에서 모든 것들을 케어하기는 쉽지 않습니다.

이런 경우 Dockerfile 스크립트를 이용하여 개발에 필요한 도구를 한번에 패키징해서 배포, 공유하는 것이 도움이 됩니다.

```
FROM diamol/base AS build-stage
RUN echo 'building...' > /build.txt

FROM diamol/base AS test-stage
COPY --from=build-stage /build.txt /build.txt
RUN echo 'Testing...' >> /build.txt

FROM diamol/base
COPY --from=test-stage /build.txt /build.txt
CMD cat /build.txt
```

> 이런식으로 여러개의 스테이지를 나누어 멑리 스테이지를 구현하는 것이 그 예로 각각의 스테이지에서 필요한 산출물만 다음 스테이지가 가져와서 사용하는 방식입니다.

다만 각 빌드 단계는 모두 격리되어 있기에 빌드 단계별로 기반 이미지나 도구가 달라질 수 있습니다.

```
docker image build -t multi-stage .
........
 => CACHED [build-stage 2/2] RUN echo 'Building...' > /build.txt
 => CACHED [test-stage 2/3] COPY --from=build-stage /build.txt /build.txt
 => CACHED [test-stage 3/3] RUN echo 'Testing...' >> /build.txt 
 => CACHED [stage-2 2/2] COPY --from=test-stage /build.txt /build.txt    
 => exporting to image                                                   
 => => exporting layers
 => => exporting manifest sha256:1f8f9dd89b3638eeb1874e2618738d703d2e6b4d801876e4789f32108d485432
 => => exporting config sha256:d95ab7db7081ced6b32b0279f3553379ca8af59f896b4c2da7a7869049d4eb25
 => => exporting attestation manifest sha256:3c8ad61807be69d49561c7d86fd3f5a9505337e734db5a2d6b80e1d1bf993405
 => => exporting manifest list sha256:5a388c376177a0b92ac13d781bc2beaeb11fe54385a474e4b423e506cd8ec586
 => => naming to docker.io/library/multi-stage:latest
 => => unpacking to docker.io/library/multi-stage:latest
```

처음 빌드하고 이를 테스트 한뒤 성공적으로 마친 바이너리를 이미지에 복사합니다. 결국 도커만 갖춰진다면 빌드 서버에서도 애플리케이션의 진정한 이식성을 갖출 수 있습니다. 

