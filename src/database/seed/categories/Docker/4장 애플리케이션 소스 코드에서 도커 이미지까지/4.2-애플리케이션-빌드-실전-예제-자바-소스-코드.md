---
title: '애플리케이션 빌드 실전 예제:자바 소스 코드'
categoryPath:
  - 'Docker'
  - '4장 애플리케이션 소스 코드에서 도커 이미지까지'
  - '4.2 애플리케이션 빌드 실전 예제:자바 소스 코드'
authorNick: '관리자'
createdAt: '2025-08-10'
updateMode: 'upsert'
---

# 애플리케이션 빌드 실전 예제:자바 소스 코드

```
FROM diamol/maven AS builder

WORKDIR /usr/src/iotd // 해당 경로로 작업 디렉토리 지정
COPY pom.xml . // pom.xml파일을 작업 디렉토리로 복사 
RUN mvn -B dependency:go-offline // 그뒤에 디펜던시를 내려받는다.

COPY . . // 디펜던시 복사
RUN mvn package // 애플리케이션 빌드 및 패키징
-> 컴파일된 애플리케이션이 생성
# app
FROM diamol/openjdk 

WORKDIR /app
COPY --from=builder /usr/src/iotd/target/iotd-service-0.1.0.jar . // builder 단계에서 컴파일된 애플리케이션을 찾아서 가져온다

EXPOSE 80 // 80번 포트 공개
ENTRYPOINT ["java", "-jar", "/app/iotd-service-0.1.0.jar"] // ENTRYPOINT : CMD와 같은 기능을 가진 인스트럭션, 해당 이미지로 컨테이너가 실행시 인스트럭션에 정의된 명령 실행
```

```
docker network create nat // nat이라는 이름을 가진 도커 네트워크 생성
docker container run --name iotd -d -p 800:80 --network nat image-of-the-day
d8b63cee9146ce3d1f9029963841324f5f0d849208b6071b689a380cd3b1ae34

-> 빌드시에 사용했던 mvn 명령어는 최종단계에 포함되지 않기때문에 이미지에서 mvn 명령어는 사용할 수 없다. 
즉 마지막 산출물을 제외한 그전 단계에서 사용했던 코드들은 사라진다. 사용하고자하면 복사해서 가져와야함

nodejs -> 자바스크립트를 사용
js -> 인터프리터형 언어로 컴파일이 필요x
즉 nodejs 런타임과 소스코드가 이미지에 포함되어 있어야한다.
-> 멀티스테이징은 의존 모듈 로딩을 최적화할 수 있다.
```
