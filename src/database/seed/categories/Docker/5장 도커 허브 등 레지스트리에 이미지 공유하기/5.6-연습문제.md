---
title: '연습문제'
categoryPath:
  - 'Docker'
  - '5장 나만의 도커 레지스트리 운영하기'
  - '5.6 연습문제'
authorNick: '관리자'
createdAt: '2025-08-27'
updateMode: 'upsert'
---

# 연습문제

이번에는 [도커 레지스트리 API v2 명세](https://docs.docker.com/registry/spec/api)를 조사해보세요.

이 문서에 정의된 REST API를 통해서만 로컬 도커 레지스트리에 접근할 수 있고, <br> 
도커 명령행만으로는 이미지를 검색할 수도 삭제할 수도 없습니다.

이때 gallery/ui 이미지의 모든 태그를 로컬 컴퓨터의 레지스트리에 푸쉬하고 <br>
푸쉬한 태그들을 확인한 뒤, 삭제하고 삭제여부까지 확인해보세요.

## 🤔 힌트 

- 한 번의 image push 명령만으로 모든 태그를 푸쉬하세요.
- 로컬 컴퓨터의 레지스트리 API 주소는 ``http://registry.local:5000/v2``입니다.
- 대상 리포지터리(gallery/ui)의 태그 목록을 먼저 확인하세요.
- 그다음 이미지 메니페스트를 확인해보세요.
- API를 통해 이미지를 삭제해보세요.
- 참조 문서를 참고하면 HEAD 요청에 꼭 필요한 요청 헤더가 있습니다.



<details>
<summary><strong>정답 보기</strong></summary>

### 이미지 푸쉬

```
docker image push registry.local:5000/gallery/ui
```

> 모든 이미지 태그를 레지스트리에 푸쉬합니다

### 푸쉬된 이미지 확인 

```bash
curl http://registry.local:5000/v2/gallery/ui/tags/list
```

### 최신의 매니페스트 가져오기

```bash
curl --head \
  http://registry.local:5000/v2/gallery/ui/manifests/latest \
  -H 'Accept: application/vnd.docker.distribution.manifest.v2+json'
```
> 출력 헤더에 ``Docker-Content-Digest``가 있으며, 이것이 필요한 요청 헤더입니다.


```bash
# 예시
Docker-Content-Digest: sha256:127d0ed6f7a8d148a39b7ea168c083694d030e2bffbda60cb53057e731114fbb
```

## 이미지 삭제

```bash
curl -X DELETE \
  http://registry.local:5000/v2/gallery/ui/manifests/sha256:127d0ed6f7a8d148a39b7ea168c083694d030e2bffbda60cb53057e731114fbb
```

## 이미지 삭제 확인

```bash
curl http://registry.local:5000/v2/gallery/ui/tags/list
```

</details>
<br/>
