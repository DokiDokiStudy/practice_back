---
title: '나만의 도커 레지스트리 운영하기'
authorNick: '관리자'
createdAt: '2025-08-27'
updateMode: 'upsert'
---

로컬 네트워크에 전용 레지스트리의 장점

1. 인터넷 회신 사용량 감소
2. 전송 시간 절약
3. 공개 레지스트리가 사용불가할 때에 신속하게 전환 가능

```
# --restart를 이용하여 도커 재시작시 자동으로 컨테이너 재시작
docker container run -d -p 5000:5000 --restart always ${계정명}/registry

# 도메인 네임을 별명 추가
# 윈도 환경
Add-Content -Value "127.0.0.1 registry.local" -Path /windows/system32/drivers/etc/hosts

# MacOs 환경
echo $'\n127.0.0.1 registry.local' | sudo tee -a /etc/hosts

# 추가된 도메인 네임 호출
ping registry.local

docker image tag ${image명} registry.local:5000/gallery/ui:v1
docker image tag ${image명} registry.local:5000/gallery/api:v1
...
```

로컬 컴퓨터의 레지스트리에 이미지를 푸쉬하려면 비보안 프로토콜인 HTTP을 사용하는데,
도커의 기본설정은 불가능하기에 추가 설정이 필요하다.

- 태스크 바에 도커 고래 아이콘을 우클릭한뒤 컨텍스트 메뉴에서 setting(Macos: Preference) 클릭
- Daemon 탭에서 비보안 레지스틜 목록에 registry.local:5000 추가
- 도커 엔진 재시작 후 daemon.json파일을 열어 목록을 추가한다.

```
{
  "insecure-registries": ["registry.local:5000"]
}
```

이후 *docker info*를 통해서 허용목록에 포함여부를 확인한 후에

```
docker image push registry.local:5000/gallery/ui:v1
```

위의 명령어로 이미지를 푸쉬한다.
