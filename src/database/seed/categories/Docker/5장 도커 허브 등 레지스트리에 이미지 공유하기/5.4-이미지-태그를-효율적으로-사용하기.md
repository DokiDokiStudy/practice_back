---
title: '이미지 태그를 효율적으로 사용하기'
authorNick: '관리자'
createdAt: '2025-08-27'
updateMode: 'upsert'
---

# 5.4 이미지 태그를 효율적으로 사용하기

대부분의 소프트웨어는 **`major.minor.patch`** 형식의 버전 체계를 사용합니다.  
도커 이미지도 이 방식을 활용하면 사용자에게 **업데이트 선택권**을 제공할 수 있습니다.

<br/>

## 📊 시맨틱 버저닝 (Semantic Versioning)

버전 번호는 다음과 같은 의미를 가집니다:

```
major.minor.patch
  2  . 1  . 106
```

| 구분      | 의미                               | 예시              | 업데이트 시기            |
| --------- | ---------------------------------- | ----------------- | ------------------------ |
| **major** | 대규모 변경, 이전 버전과 호환 불가 | 2 → 3             | API 변경, 구조 개편      |
| **minor** | 새로운 기능 추가, 하위 호환 유지   | 2.1 → 2.2         | 신규 기능, 개선사항      |
| **patch** | 버그 수정, 보안 패치               | 2.1.106 → 2.1.114 | 버그 픽스, 보안 업데이트 |

<br/>

## 🏷️ 하나의 이미지에 여러 태그 부여하기

같은 이미지에 **여러 레벨의 태그**를 동시에 붙여서 사용자가 원하는 업데이트 수준을 선택할 수 있게 합니다.

### 태그 생성 예시

```bash
# 2.1.106 버전 릴리즈
- docker image tag image-gallery registry.local:5000/gallery/ui:latest
- docker image tag image-gallery registry.local:5000/gallery/ui:2
- docker image tag image-gallery registry.local:5000/gallery/ui:2.1
- docker image tag image-gallery registry.local:5000/gallery/ui:2.1.106
```

**결과:**

```bash
docker image ls --filter reference='*/gallery/ui'

REPOSITORY                          TAG       IMAGE ID
registry.local:5000/gallery/ui      latest    49c543b748ff
registry.local:5000/gallery/ui      2         49c543b748ff  # 같은 IMAGE ID
registry.local:5000/gallery/ui      2.1       49c543b748ff  # 같은 IMAGE ID
registry.local:5000/gallery/ui      2.1.106   49c543b748ff  # 같은 IMAGE ID
```

4개의 태그 모두 <strong>동일한 이미지</strong>를 가리킵니다.

- IMAGE ID가 같으면 실제로는 하나의 이미지
- 태그는 단순히 이미지를 가리키는 **포인터(별명)**
- 디스크 공간은 추가로 차지하지 않음
- 레지스트리에 푸시해도 **첫 번째만 실제 전송**, 나머지는 참조만 생성

```
:latest  ──┐
:2       ──┼──→ [실제 이미지: 49c543b748ff]
:2.1     ──┤
:2.1.106 ──┘
```

</details>

<br/>

## 📅 시간에 따른 태그 변화

새로운 버전이 릴리즈될 때마다 **유연한 태그들은 업데이트**되지만,  
**정확한 버전 태그는 그대로 유지**됩니다.

| 시기     | 릴리즈  | 적용되는 태그                       |
| -------- | ------- | ----------------------------------- |
| **7월**  | 2.1.106 | `:latest`, `:2`, `:2.1`, `:2.1.106` |
| **8월**  | 2.1.114 | `:latest`, `:2`, `:2.1`, `:2.1.114` |
| **9월**  | 2.2.11  | `:latest`, `:2`, `:2.2`, `:2.2.11`  |
| **10월** | 3.0.42  | `:latest`, `:3`, `:3.0`, `:3.0.42`  |

### 8월의 변화 살펴보기

**2.1.114 릴리즈 후:**

```bash
# 업데이트되는 태그
:latest    → 2.1.114 ✨
:2         → 2.1.114 ✨
:2.1       → 2.1.114 ✨
:2.1.114   → 2.1.114 (새로 생성)

# 그대로 유지되는 태그
:2.1.106   → 2.1.106 ✅
```

**레지스트리 상태:**

```
📦 이미지 실체:
  - 2.1.106 버전  ← 계속 보관됨
  - 2.1.114 버전  ← 새로 추가됨

```

<br/>

## 💡 핵심 개념

### 시맨틱 버저닝 (Semantic Versioning)

소프트웨어 버전 관리 표준

- **Major**: 호환 불가 변경
- **Minor**: 기능 추가 (하위 호환)
- **Patch**: 버그 수정

### 태그 전략

| 태그 형식 | 업데이트 범위  | 추천 환경     |
| --------- | -------------- | ------------- |
| `:latest` | 모든 변경사항  | 개발          |
| `:3`      | Major 버전 내  | 스테이징      |
| `:3.0`    | Minor 버전 내  | 보수적 서비스 |
| `:3.0.42` | 절대 변경 없음 | **프로덕션**  |

<br/>

## 🎮 연습 문제

**문제 1:** 버전 2.1.106에서 2.1.114로 업데이트되었을 때, 다음 중 변경되지 않는 태그는?

A. `:latest`  
B. `:2`  
C. `:2.1`  
D. `:2.1.106`

<details>
<summary><strong>정답 보기</strong></summary>

**정답: D**

`:2.1.106`은 정확한 버전을 가리키므로 절대 변경되지 않습니다.

- `:latest`, `:2`, `:2.1`은 최신 버전을 가리키도록 업데이트됨 (2.1.114)
- `:2.1.106`은 영원히 2.1.106 버전을 가리킴

</details>
<br/>

**문제 2:** 프로덕션 환경에서 권장되는 태그 형식은?

A. `:latest` - 항상 최신 버전  
B. `:2` - Major 버전만 고정  
C. `:2.1` - Minor 버전까지 고정  
D. `:2.1.106` - 정확한 버전 고정

<details>
<summary><strong>정답 보기</strong></summary>

**정답: D**

프로덕션 환경에서는 **정확한 버전(`:2.1.106`)** 사용을 강력히 권장합니다.

**이유:**

- 완벽한 재현성 보장
- 예측 불가능한 변경 방지
- 롤백 시 정확한 버전 복원 가능

`:latest`나 `:2` 같은 유연한 태그는 개발/테스트 환경에서만 사용하세요!

</details>
