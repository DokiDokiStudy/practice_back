---
title: "7.3 도커 컨테이너 간의 통신"
categoryPath:
  - "Docker"
  - "7장 도커 컴포즈로 분산 애플리케이션 실행하기"
  - "7.3 도커 컨테이너 간의 통신"
authorNick: "관리자"
createdAt: "2025-08-27"
updateMode: "upsert"
---

# 7.3 도커 컨테이너 간의 통신

## 개요

도커 컨테이너는 분산 애플리케이션에서 서로 통신해야 한다. 각 컨테이너는 독립적인 환경이지만 같은 네트워크에 연결되어 있을 때 효과적으로 통신할 수 있다.

## 상세 내용

### 컨테이너 네트워크와 IP 주소

도커 컨테이너는 격리된 환경으로 각각 고유한 네트워크 공간을 가진다:

- 각 컨테이너는 도커 엔진으로부터 고유한 가상 IP 주소를 할당받는다
- 같은 도커 네트워크에 연결된 컨테이너들은 이 IP 주소를 통해 서로 통신할 수 있다
- 컨테이너가 재시작되거나 새로 생성되면 IP 주소가 변경될 수 있다


### DNS와 서비스 디스커버리

IP 주소가 변경되는 문제를 해결하기 위해 도커는 DNS(Domain Name System)를 통한 서비스 디스커버리를 제공한다:

- **DNS란?** 도메인 이름을 IP 주소로 변환해주는 시스템이다
- 예: `sellmatepos.co.kr`과 같은 도메인 이름이 실제 서버의 IP 주소로 변환된다

#### 도커의 내장 DNS 서비스 기능:

1. **컨테이너 이름을 도메인으로 사용**: 같은 네트워크 내에서 컨테이너 이름으로 다른 컨테이너에 접근 가능
2. **외부 DNS 요청 처리**: 도커 내부에서 찾을 수 없는 도메인은 호스트 컴퓨터의 DNS 서버로 요청이 전달됨

### 실습: DNS 조회 테스트

도커 컴포즈로 서비스를 여러 개의 컨테이너로 확장했을 때 DNS 조회 결과를 확인해보자:

1. **서비스 스케일 업**:
   ```bash
   docker compose up -d --scale iotd=3
   ```

2. **컨테이너에 접속**:
   - 리눅스 환경:
     ```bash
     docker container exec -it image-of-the-day_image-gallery_1 sh
     ```
   - 윈도우 환경:
     ```bash
     docker container exec -it image-of-the-day_image-gallery_1 cmd
     ```

3. **DNS 조회 수행**:
   ```bash
   nslookup accesslog
   ```

4. **조회 결과**:
   ```
   Name: accesslog
   Address 1: 172.24.0.2 image-of-the-day_accesslog_1.nat
   ```

이 결과는 `accesslog`라는 이름이 실제 컨테이너의 IP 주소(`172.24.0.2`)와 연결되어 있음을 보여준다.

### DNS 기반 로드 밸런싱

여러 인스턴스로 확장된 서비스의 경우, DNS 조회 결과가 다중 IP 주소를 반환할 수 있다:

1. **여러 인스턴스가 있는 서비스 조회**:
   ```bash
   nslookup iotd
   ```

2. **조회 결과 (예시)**:
   ```
   Name: iotd
   Address 1: 172.24.0.3 image-of-the-day_iotd_1.nat
   Address 2: 172.24.0.4 image-of-the-day_iotd_2.nat
   Address 3: 172.24.0.5 image-of-the-day_iotd_3.nat
   ```

### 도커의 DNS 로드 밸런싱

도커는 DNS 결과를 통해 간단한 로드 밸런싱을 구현한다:

- DNS 조회 결과의 순서는 매번 변경된다 (라운드 로빈 방식)
- 이를 통해 클라이언트가 여러 서버에 고르게 요청을 분산할 수 있다
- 실제 결과 활용은 애플리케이션 코드에서 결정한다

### 컨테이너 간 통신의 장점

- **확장성**: 서비스를 쉽게 스케일 아웃하고 트래픽을 분산할 수 있다
- **유연성**: 컨테이너의 IP가 변경되더라도 도메인 이름은 그대로 유지된다
- **보안**: 내부 네트워크는 외부로부터 격리되어 있다
- **투명성**: 애플리케이션 코드를 수정하지 않고도 인프라를 확장할 수 있다

도커 컨테이너 간의 통신은 마이크로서비스 아키텍처와 분산 애플리케이션을 구축하는 데 필수적인 요소이며, 도커 컴포즈는 이러한 통신을 쉽게 구성할 수 있게 해준다.