---
title: "7.1 도커 컴포즈 파일의 구조"
categoryPath:
  - "Docker"
  - "7장 도커 컴포즈로 분산 애플리케이션 실행하기"
  - "7.1 도커 컴포즈 파일의 구조"
authorNick: "관리자"
createdAt: "2025-08-27"
updateMode: "upsert"
---

# 7.1 도커 컴포즈 파일의 구조

## 개요

도커 컴포즈(Docker Compose)는 여러 컨테이너로 구성된 애플리케이션을 손쉽게 정의하고 실행할 수 있게 해주는 도구이다.  
각 컴포넌트별 Dockerfile을 관리하는 대신, 하나의 컴포즈 파일에서 모든 컨테이너의 실행 상태와 옵션을 기술할 수 있습니다.

- **도커 컴포즈 파일의 역할**
  - 애플리케이션의 모든 실행 옵션과 상태를 정의
  - 컨테이너, 네트워크, 볼륨 등 필요한 도커 객체를 자동으로 생성
  - 소스코드 및 Dockerfile과 함께 형상 관리 가능
  - 별도의 문서화 없이 이미지 이름, 포트번호 등 관리

---

## 도커 컴포즈 파일의 기본 구조

도커 컴포즈 파일은 YAML 문법으로 작성되며, 들여쓰기가 매우 중요하.

```yaml
version: '3.7'

services:
  todo-web:
    image: diamol/ch06-todo-list
    ports: 
      - "8020:80"
    networks:
      - app-net

networks:
  app-net:
    external:
      name: nat
```

- **최상위 항목**
  - `version`: 도커 컴포즈 파일 형식의 버전
  - `services`: 애플리케이션을 구성하는 모든 컴포넌트(서비스) 정의
    - `image`: 사용할 도커 이미지
    - `ports`: 공개할 포트 정보
    - `networks`: 연결할 도커 네트워크
  - `networks`: 서비스 컨테이너가 연결될 네트워크 정의
    - `external`: 이미 존재하는 네트워크 사용

---

## 동작 원리

1. 도커 컴포즈 파일을 기반으로 컨테이너, 네트워크 등 필요한 리소스를 생성
2. 예시의 경우, `todo-web` 서비스가 `diamol/ch06-todo-list` 이미지를 사용해 컨테이너를 실행
3. 컨테이너는 호스트의 8020 포트를 컨테이너의 80번 포트에 매핑
4. `app-net` 네트워크에 연결됨 (`nat` 네트워크가 이미 존재)

> 실제로 아래 명령과 동일한 효과를 가짐  
> `docker container run -p 8020:80 --name todo-web --network nat diamol/ch06-todo-list`

---

## 실행 방법

1. 도커 컴포즈 파일이 있는 폴더로 이동  
   ```bash
   cd ./ch07/exercise/todo-list
   ```
2. 애플리케이션 실행  
   ```bash
   docker compose up
   ```
3. 도커 컴포즈가 `docker-compose.yml` 파일을 읽고, 정의된 서비스와 네트워크를 자동으로 생성 및 실행

- 컨테이너별로 로그가 정리되어 개발 및 테스트에 용이

---

## 참고

- 리눅스 컨테이너: 도커 컴포즈가 네트워크를 자동 관리
- 윈도우 컨테이너: 기본 네트워크(nat)를 사용해야 함

---