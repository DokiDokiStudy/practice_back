---
title: '컨테이너 속 데이터가 사라지는 이유'
authorNick: '관리자'
createdAt: '2025-08-27'
updateMode: 'upsert'
---

컨테이너는 무상태 애플리케이션에게는 최적의 실행 환경이다.
사용량이 증가하더라도 클러스터에 실행중인 컨테이너의 수를 늘리기만 하면 모든 요청이 똑같이 신뢰성 있게 처리된다.
롤링 업데이트를 통하면 서비스 중단 없이 점진적인 업데이트 배포가 가능하다.

다만 상태가 있는 애플리케이션의 경우에 퍼시스턴시나 성능 향상을 위해 디스크를 사용하는 컴포넌트가 있어야하고, 컴포넌트 역시 컨테이너에서 실행된다.
스토리지가 관련되는 순간 복잡한 상황이 생기는데 이를 위해서 도커 불륨과 마운트를 사용한다.

## 컨테이너 속 데이터가 사라지는 이유

도커 컨테이너도 단일 드라이브 파일 시스템이 있고, 이는 이미지 속 파일을 기반으로 만들어진다.
컨테이너는 모두 독립된 파일 시스템을 갖고, 같은 이미지여도 그 이후에는 디스크의 내용이 달라질 수 있다.

컨테이너의 파일 시스템은 단일 디스크이고, 도커가 여러 출처로부터 합쳐 만들고 컨테이너에 전달한 가상 파일 시스템이다.
각 컨테이너의 기록 가능 레이어는 컨테이너와 같은 생애주기를 갖고, 이미지 레이어는 이미지를 내려받은 순간부터 삭제할때까지 로컬 컴퓨터의 이미지 레이어에 존재한다.

## 기록 가능 레이어

기록 가능 레이어는 기본적으로 **읽기 전용**이지만 도커는 **기록 중 복사(copy-on-write)**라는 방법을 통해서 읽기 전용 레이어의 파일을 수정한다.
도커가 파일을 쓰기 가능 레이어로 복사해온 다음 쓰기 가능 레이어에서 파일 수정하기에 도커가 스토리지를 효율적으로 사용할 수 있는 것이다.
