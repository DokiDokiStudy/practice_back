---
title: "3.6 ì—°ìŠµ ë¬¸ì œ"
categoryPath:
  - "Docker"
  - "3ì¥ ë„ì»¤ ì´ë¯¸ì§€ ë§Œë“¤ê¸°"
  - "3.6 ì—°ìŠµ ë¬¸ì œ"
authorNick: "ê´€ë¦¬ì"
createdAt: "2025-08-27"
updateMode: "upsert"
---

ì´ë²ˆ ì¥ì—ì„œ í•™ìŠµí•œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì‹¤ìŠµì„ í†µí•´ ì‹¤ë ¥ì„ ì ê²€í•´ë³´ì„¸ìš”. ë‹¨ê³„ë³„ë¡œ ì§„í–‰í•˜ë©´ì„œ Docker ì´ë¯¸ì§€ ìƒì„±ì˜ ì „ ê³¼ì •ì„ ë§ˆìŠ¤í„°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ê¸°ë³¸ ì‹¤ìŠµ ë¬¸ì œ

### ë¬¸ì œ 1: ì •ì  ì›¹ì‚¬ì´íŠ¸ ë°°í¬í•˜ê¸°

**ëª©í‘œ**: ê°„ë‹¨í•œ HTML íŒŒì¼ì„ ë§Œë“¤ì–´ Nginx ì´ë¯¸ì§€ì— ë³µì‚¬í•˜ì—¬ ì›¹ì„œë²„ êµ¬ì¶•

#### ë‹¨ê³„ë³„ ì‹¤ìŠµ ê°€ì´ë“œ

##### 1ë‹¨ê³„: í”„ë¡œì íŠ¸ í™˜ê²½ ì¤€ë¹„
```bash
# ì‘ì—… ë””ë ‰í† ë¦¬ ìƒì„±
mkdir docker-nginx-practice
cd docker-nginx-practice

# ê¸°ë³¸ HTML íŒŒì¼ ìƒì„±
cat > index.html << 'EOF'
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ ì²« Docker ì›¹ì‚¬ì´íŠ¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        .info {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dockerë¡œ ë°°í¬í•œ ë‚´ ì²« ì›¹ì‚¬ì´íŠ¸!</h1>
        <div class="info">
            <h3>Docker í•™ìŠµ ì§„í–‰ì‚¬í•­</h3>
            <ul>
                <li>Docker ê¸°ë³¸ ê°œë… ì´í•´</li>
                <li>ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ë° ê´€ë¦¬</li>
                <li>Docker ì´ë¯¸ì§€ ìƒì„±</li>
                <li>Dockerfile ì‘ì„±</li>
                <li>í˜„ì¬: ì›¹ì„œë²„ ë°°í¬ ì‹¤ìŠµ</li>
            </ul>
        </div>
        <div class="info">
            <h3>ì„œë²„ ì •ë³´</h3>
            <p><strong>ì›¹ì„œë²„:</strong> Nginx</p>
            <p><strong>í¬íŠ¸:</strong> 80</p>
            <p><strong>ë°°í¬ ì‹œê°„:</strong> <span id="datetime"></span></p>
        </div>
        <div class="info">
            <h3>ì´ë²ˆ ì‹¤ìŠµì—ì„œ ë°°ìš´ ê²ƒ</h3>
            <ul>
                <li>ì •ì  íŒŒì¼ì„ Docker ì»¨í…Œì´ë„ˆë¡œ ë°°í¬í•˜ëŠ” ë°©ë²•</li>
                <li>Nginxë¥¼ ì‚¬ìš©í•œ ì›¹ì„œë²„ êµ¬ì¶•</li>
                <li>Dockerfileì„ í†µí•œ ì´ë¯¸ì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§•</li>
                <li>í¬íŠ¸ ë§¤í•‘ì„ í†µí•œ ì„œë¹„ìŠ¤ ë…¸ì¶œ</li>
            </ul>
        </div>
    </div>

    <script>
        // í˜„ì¬ ì‹œê°„ í‘œì‹œ
        document.getElementById('datetime').textContent = new Date().toLocaleString('ko-KR');
    </script>
</body>
</html>
EOF

echo "HTML íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!"
```

##### 2ë‹¨ê³„: Dockerfile ì‘ì„±
```bash
cat > Dockerfile << 'EOF'
# ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¡œ Nginx ì‚¬ìš©
FROM nginx:alpine

# HTML íŒŒì¼ì„ Nginxì˜ ê¸°ë³¸ ë¬¸ì„œ ë£¨íŠ¸ë¡œ ë³µì‚¬
COPY index.html /usr/share/nginx/html/

# í¬íŠ¸ 80 ë…¸ì¶œ
EXPOSE 80

# Nginx ì‹¤í–‰ (ê¸°ë³¸ CMD ì‚¬ìš©)
EOF

echo "Dockerfileì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!"
```

##### 3ë‹¨ê³„: ì´ë¯¸ì§€ ë¹Œë“œ
```bash
# ì´ë¯¸ì§€ ë¹Œë“œ (ê° ë‹¨ê³„ë³„ ë¡œê·¸ í™•ì¸)
docker build -t my-nginx-website .

# ë¹Œë“œ ê²°ê³¼ í™•ì¸
docker images | grep my-nginx-website

echo "ì´ë¯¸ì§€ ë¹Œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"
```

##### 4ë‹¨ê³„: ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸
```bash
# ì»¨í…Œì´ë„ˆ ì‹¤í–‰ (í¬íŠ¸ 8080ìœ¼ë¡œ ë§¤í•‘)
docker run -d -p 8080:80 --name my-website my-nginx-website

# ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker ps | grep my-website

# ì›¹ì‚¬ì´íŠ¸ ì ‘ì† í…ŒìŠ¤íŠ¸
curl http://localhost:8080

echo "ì›¹ì‚¬ì´íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë°°í¬ë˜ì—ˆìŠµë‹ˆë‹¤!"
echo "ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8080 ì ‘ì†í•˜ì—¬ í™•ì¸í•˜ì„¸ìš”!"
```

##### 5ë‹¨ê³„: ì¶”ê°€ íŒŒì¼ë¡œ ê¸°ëŠ¥ í™•ì¥
```bash
# CSS íŒŒì¼ ìƒì„±
mkdir css
cat > css/style.css << 'EOF'
/* ì¶”ê°€ ìŠ¤íƒ€ì¼ë§ */
.footer {
    text-align: center;
    margin-top: 30px;
    padding: 20px;
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
}

.docker-logo {
    font-size: 2em;
    animation: spin 10s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
EOF

# JavaScript íŒŒì¼ ìƒì„±
mkdir js  
cat > js/app.js << 'EOF'
// ë™ì  ì»¨í…ì¸  ì¶”ê°€
document.addEventListener('DOMContentLoaded', function() {
    // ë°©ë¬¸ì ìˆ˜ ì‹œë®¬ë ˆì´ì…˜
    const visitors = Math.floor(Math.random() * 1000) + 1;
    
    // Footer ì¶”ê°€
    const footer = document.createElement('div');
    footer.className = 'footer';
    footer.innerHTML = `
        <div class="docker-logo">ğŸ³</div>
        <p>Docker ì‹¤ìŠµ ì™„ë£Œ! ë°©ë¬¸ì ìˆ˜: ${visitors}ëª…</p>
        <p>Made with and Docker</p>
    `;
    
    document.querySelector('.container').appendChild(footer);
});
EOF

# HTML íŒŒì¼ ì—…ë°ì´íŠ¸ (CSS, JS ë§í¬ ì¶”ê°€)
cat > index.html << 'EOF'
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ ì²« Docker ì›¹ì‚¬ì´íŠ¸</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        .info {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dockerë¡œ ë°°í¬í•œ ë‚´ ì²« ì›¹ì‚¬ì´íŠ¸!</h1>
        <div class="info">
            <h3>Docker í•™ìŠµ ì§„í–‰ì‚¬í•­</h3>
            <ul>
                <li>Docker ê¸°ë³¸ ê°œë… ì´í•´</li>
                <li>ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ë° ê´€ë¦¬</li>
                <li>Docker ì´ë¯¸ì§€ ìƒì„±</li>
                <li>Dockerfile ì‘ì„±</li>
                <li>ì›¹ì„œë²„ ë°°í¬ ì‹¤ìŠµ ì™„ë£Œ!</li>
            </ul>
        </div>
        <div class="info">
            <h3>ì„œë²„ ì •ë³´</h3>
            <p><strong>ì›¹ì„œë²„:</strong> Nginx</p>
            <p><strong>í¬íŠ¸:</strong> 80</p>
            <p><strong>ë°°í¬ ì‹œê°„:</strong> <span id="datetime"></span></p>
        </div>
        <div class="info">
            <h3>ì´ë²ˆ ì‹¤ìŠµì—ì„œ ë°°ìš´ ê²ƒ</h3>
            <ul>
                <li>ì •ì  íŒŒì¼ì„ Docker ì»¨í…Œì´ë„ˆë¡œ ë°°í¬í•˜ëŠ” ë°©ë²•</li>
                <li>Nginxë¥¼ ì‚¬ìš©í•œ ì›¹ì„œë²„ êµ¬ì¶•</li>
                <li>Dockerfileì„ í†µí•œ ì´ë¯¸ì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§•</li>
                <li>í¬íŠ¸ ë§¤í•‘ì„ í†µí•œ ì„œë¹„ìŠ¤ ë…¸ì¶œ</li>
                <li>ì •ì  ìì›(CSS, JS) í¬í•¨í•œ ì›¹ì‚¬ì´íŠ¸ êµ¬ì¶•</li>
            </ul>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        document.getElementById('datetime').textContent = new Date().toLocaleString('ko-KR');
    </script>
</body>
</html>
EOF

# Dockerfile ì—…ë°ì´íŠ¸
cat > Dockerfile << 'EOF'
FROM nginx:alpine

# ëª¨ë“  ì›¹ ìì›ì„ ë³µì‚¬
COPY index.html /usr/share/nginx/html/
COPY css/ /usr/share/nginx/html/css/
COPY js/ /usr/share/nginx/html/js/

EXPOSE 80
EOF

# ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì •ì§€ ë° ì œê±°
docker stop my-website
docker rm my-website

# ìƒˆë¡œìš´ ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t my-nginx-website:v2 .

# ì—…ë°ì´íŠ¸ëœ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run -d -p 8080:80 --name my-website-v2 my-nginx-website:v2

echo "ì›¹ì‚¬ì´íŠ¸ê°€ ì—…ê·¸ë ˆì´ë“œë˜ì—ˆìŠµë‹ˆë‹¤!"
echo "ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8080 ì ‘ì†í•˜ì—¬ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ í™•ì¸í•˜ì„¸ìš”!"
```

---

## ì¤‘ê¸‰ ì‹¤ìŠµ ë¬¸ì œ

### ë¬¸ì œ 2: Node.js API ì„œë²„ ì»¨í…Œì´ë„ˆí™”

**ëª©í‘œ**: Express.jsë¥¼ ì‚¬ìš©í•œ REST API ì„œë²„ë¥¼ Dockerë¡œ ì»¨í…Œì´ë„ˆí™”

#### ì‹¤ìŠµ ê°€ì´ë“œ
```bash
# í”„ë¡œì íŠ¸ ì¤€ë¹„
mkdir docker-nodejs-api
cd docker-nodejs-api

# package.json ìƒì„±
cat > package.json << 'EOF'
{
  "name": "docker-api-demo",
  "version": "1.0.0",
  "description": "Dockerë¡œ ë°°í¬í•˜ëŠ” Node.js API",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "cors": "^2.8.5"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}
EOF

# Express ì„œë²„ ì½”ë“œ ìƒì„±
cat > server.js << 'EOF'
const express = require('express');
const cors = require('cors');

const app = express();
const PORT = process.env.PORT || 3000;

// ë¯¸ë“¤ì›¨ì–´
app.use(cors());
app.use(express.json());

// ë”ë¯¸ ë°ì´í„°
let todos = [
  { id: 1, text: 'Docker í•™ìŠµí•˜ê¸°', completed: false },
  { id: 2, text: 'Node.js API ë§Œë“¤ê¸°', completed: true },
  { id: 3, text: 'ì»¨í…Œì´ë„ˆ ë°°í¬í•˜ê¸°', completed: false }
];

// ë¼ìš°íŠ¸
app.get('/', (req, res) => {
  res.json({
    message: 'Dockerë¡œ ë°°í¬ëœ Node.js API ì„œë²„ì…ë‹ˆë‹¤!',
    version: '1.0.0',
    endpoints: {
      'GET /': 'ì„œë²„ ì •ë³´',
      'GET /todos': 'í• ì¼ ëª©ë¡ ì¡°íšŒ',
      'POST /todos': 'í• ì¼ ì¶”ê°€',
      'PUT /todos/:id': 'í• ì¼ ìˆ˜ì •',
      'DELETE /todos/:id': 'í• ì¼ ì‚­ì œ'
    }
  });
});

// í• ì¼ ëª©ë¡ ì¡°íšŒ
app.get('/todos', (req, res) => {
  res.json(todos);
});

// í• ì¼ ì¶”ê°€
app.post('/todos', (req, res) => {
  const { text } = req.body;
  if (!text) {
    return res.status(400).json({ error: 'text í•„ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤' });
  }
  
  const newTodo = {
    id: Math.max(...todos.map(t => t.id)) + 1,
    text,
    completed: false
  };
  
  todos.push(newTodo);
  res.status(201).json(newTodo);
});

// í• ì¼ ìˆ˜ì •
app.put('/todos/:id', (req, res) => {
  const id = parseInt(req.params.id);
  const { text, completed } = req.body;
  
  const todoIndex = todos.findIndex(t => t.id === id);
  if (todoIndex === -1) {
    return res.status(404).json({ error: 'í• ì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤' });
  }
  
  if (text !== undefined) todos[todoIndex].text = text;
  if (completed !== undefined) todos[todoIndex].completed = completed;
  
  res.json(todos[todoIndex]);
});

// í• ì¼ ì‚­ì œ
app.delete('/todos/:id', (req, res) => {
  const id = parseInt(req.params.id);
  const todoIndex = todos.findIndex(t => t.id === id);
  
  if (todoIndex === -1) {
    return res.status(404).json({ error: 'í• ì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤' });
  }
  
  const deletedTodo = todos.splice(todoIndex, 1)[0];
  res.json(deletedTodo);
});

app.listen(PORT, '0.0.0.0', () => {
  console.log(`ì„œë²„ê°€ í¬íŠ¸ ${PORT}ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤`);
  console.log(`API ì—”ë“œí¬ì¸íŠ¸: http://localhost:${PORT}`);
});
EOF

# ìµœì í™”ëœ Dockerfile ì‘ì„±
cat > Dockerfile << 'EOF'
# ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œ ì‚¬ìš©
FROM node:18-alpine AS base
WORKDIR /app

# ì˜ì¡´ì„± íŒŒì¼ë§Œ ë¨¼ì € ë³µì‚¬ (ìºì‹œ ìµœì í™”)
COPY package*.json ./

# í”„ë¡œë•ì…˜ ì˜ì¡´ì„±ë§Œ ì„¤ì¹˜
FROM base AS dependencies
RUN npm ci --only=production && npm cache clean --force

# ê°œë°œ ë‹¨ê³„ (ì„ íƒì‚¬í•­)
FROM base AS development  
RUN npm ci
COPY . .
CMD ["npm", "run", "dev"]

# í”„ë¡œë•ì…˜ ë‹¨ê³„
FROM dependencies AS production
COPY . .

# ë³´ì•ˆì„ ìœ„í•œ non-root ì‚¬ìš©ì ìƒì„±
RUN addgroup -g 1001 -S nodejs && \
    adduser -S nodeuser -u 1001

# ì•± ë””ë ‰í† ë¦¬ ì†Œìœ ê¶Œ ë³€ê²½
RUN chown -R nodeuser:nodejs /app
USER nodeuser

EXPOSE 3000
CMD ["npm", "start"]
EOF

# .dockerignore íŒŒì¼ ìƒì„±
cat > .dockerignore << 'EOF'
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.git/
.gitignore
README.md
Dockerfile*
docker-compose*.yml
.dockerignore
coverage/
.nyc_output/
.env.local
.env.development
.env.test
EOF

echo "Node.js API í”„ë¡œì íŠ¸ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!"

# ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t nodejs-api .

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run -d -p 3000:3000 --name api-server nodejs-api

echo "API ì„œë²„ê°€ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤!"
echo "http://localhost:3000 ì—ì„œ APIë¥¼ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”!"

# API í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´
echo ""
echo "API í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´:"
echo "curl http://localhost:3000"
echo "curl http://localhost:3000/todos"
echo "curl -X POST http://localhost:3000/todos -H 'Content-Type: application/json' -d '{\"text\":\"ìƒˆ í• ì¼\"}'"
```

---

## ê³ ê¸‰ ì‹¤ìŠµ ë¬¸ì œ

### ë¬¸ì œ 3: ìºì‹œ ìµœì í™” ì±Œë¦°ì§€

**ëª©í‘œ**: ì£¼ì–´ì§„ ë¹„íš¨ìœ¨ì ì¸ Dockerfileì„ ìµœì í™”í•˜ì—¬ ë¹Œë“œ ì„±ëŠ¥ í–¥ìƒ

#### ë¬¸ì œ ìƒí™©
```bash
mkdir cache-optimization-challenge
cd cache-optimization-challenge

# ë¹„íš¨ìœ¨ì ì¸ Dockerfile (ë¬¸ì œ ì½”ë“œ)
cat > Dockerfile.inefficient << 'EOF'
FROM node:18

# ë¬¸ì œì ë“¤ì´ í¬í•¨ëœ Dockerfile
WORKDIR /app

# ëª¨ë“  íŒŒì¼ì„ ë¨¼ì € ë³µì‚¬ (ë¹„íš¨ìœ¨ì !)
COPY . .

# ê°ê° ë³„ë„ë¡œ ì‹¤í–‰ (ë ˆì´ì–´ ë‚­ë¹„!)
RUN apt-get update
RUN apt-get install -y python3
RUN apt-get install -y python3-pip
RUN apt-get install -y git
RUN apt-get install -y vim

# npm ì˜ì¡´ì„± ì„¤ì¹˜ (ìºì‹œ í™œìš© ëª»í•¨!)
RUN npm install

# ë¶ˆí•„ìš”í•œ ê°œë°œ ì˜ì¡´ì„±ë„ ì„¤ì¹˜
RUN npm install --also=dev

EXPOSE 3000
CMD ["npm", "start"]
EOF

# ë”ë¯¸ í”„ë¡œì íŠ¸ ìƒì„±
cat > package.json << 'EOF'
{
  "name": "cache-challenge",
  "version": "1.0.0",
  "dependencies": {
    "express": "^4.18.2",
    "lodash": "^4.17.21"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "nodemon": "^3.0.1",
    "jest": "^29.0.0"
  },
  "scripts": {
    "start": "node app.js",
    "dev": "nodemon app.js",
    "test": "jest"
  }
}
EOF

cat > app.js << 'EOF'
const express = require('express');
const app = express();

app.get('/', (req, res) => {
  res.json({ message: 'Cache Optimization Challenge!' });
});

app.listen(3000, () => {
  console.log('Server running on port 3000');
});
EOF

# ë¶ˆí•„ìš”í•œ íŒŒì¼ë“¤ ìƒì„± (ìµœì í™” í…ŒìŠ¤íŠ¸ìš©)
mkdir -p logs temp docs tests
dd if=/dev/zero of=logs/app.log bs=1M count=10 2>/dev/null
dd if=/dev/zero of=temp/cache.tmp bs=1M count=20 2>/dev/null
echo "# Documentation" > docs/README.md
echo "test file" > tests/app.test.js

echo "ìºì‹œ ìµœì í™” ì±Œë¦°ì§€!"
echo ""
echo "í˜„ì¬ Dockerfileì˜ ë¬¸ì œì ì„ ì°¾ê³  ìµœì í™”í•˜ì„¸ìš”:"
echo "1. ë¹Œë“œ ì‹œê°„ ì¸¡ì •"
echo "2. ë¬¸ì œì  ë¶„ì„" 
echo "3. ìµœì í™” ì ìš©"
echo "4. ì„±ëŠ¥ ë¹„êµ"
echo ""

# ìµœì í™” ì „ ë¹Œë“œ ì‹œê°„ ì¸¡ì •
echo "=== ìµœì í™” ì „ ë¹Œë“œ ì‹œê°„ ==="
time docker build -f Dockerfile.inefficient -t challenge-before .

echo ""
echo "ìµœì í™” íŒíŠ¸:"
echo "- ì˜ì¡´ì„± íŒŒì¼ì„ ë¨¼ì € ë³µì‚¬í•˜ì„¸ìš”"
echo "- RUN ëª…ë ¹ì–´ë¥¼ ê²°í•©í•˜ì„¸ìš”"
echo "- .dockerignoreë¥¼ í™œìš©í•˜ì„¸ìš”"
echo "- ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œë¥¼ ê³ ë ¤í•˜ì„¸ìš”"
echo ""
echo "ğŸ“ Dockerfile.optimizedë¥¼ ì‘ì„±í•˜ì—¬ ìµœì í™”í•´ë³´ì„¸ìš”!"
```

#### ìµœì í™” ì†”ë£¨ì…˜ (ì°¸ê³ ìš©)
```dockerfile
# Dockerfile.optimized - ìµœì í™” ì†”ë£¨ì…˜
FROM node:18-alpine AS base
WORKDIR /app

# 1. ì˜ì¡´ì„± íŒŒì¼ë§Œ ë¨¼ì € ë³µì‚¬ (ìºì‹œ ìµœì í™”)
COPY package*.json ./

# 2. ì˜ì¡´ì„± ì„¤ì¹˜ (í”„ë¡œë•ì…˜ë§Œ)
RUN npm ci --only=production && npm cache clean --force

# 3. ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬ (ìì£¼ ë³€ê²½ë˜ë¯€ë¡œ ë‚˜ì¤‘ì—)
COPY app.js ./

# 4. ë³´ì•ˆ: non-root ì‚¬ìš©ì
RUN addgroup -g 1001 -S nodejs && \
    adduser -S nodeuser -u 1001 && \
    chown -R nodeuser:nodejs /app

USER nodeuser

EXPOSE 3000
CMD ["npm", "start"]
```

```bash
# .dockerignore (ìµœì í™”ìš©)
cat > .dockerignore << 'EOF'
node_modules/
logs/
temp/
docs/
tests/
*.log
*.tmp
.git/
.gitignore
README.md
Dockerfile*
.dockerignore
EOF

# ìµœì í™” í›„ í…ŒìŠ¤íŠ¸
echo "=== ìµœì í™” í›„ ë¹Œë“œ ì‹œê°„ ==="
time docker build -f Dockerfile.optimized -t challenge-after .

echo ""
echo "ì„±ëŠ¥ ë¹„êµ:"
docker images | grep challenge-
```

---

## ì‹¤ìŠµ ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì™„ë£Œ í™•ì¸ ì‚¬í•­

#### ê¸°ë³¸ ì‹¤ìŠµ (ë¬¸ì œ 1)
- [ ] HTML íŒŒì¼ì„ ì„±ê³µì ìœ¼ë¡œ ìƒì„±í–ˆë‚˜ìš”?
- [ ] Dockerfileì„ ì˜¬ë°”ë¥´ê²Œ ì‘ì„±í–ˆë‚˜ìš”?  
- [ ] ì´ë¯¸ì§€ê°€ ì •ìƒì ìœ¼ë¡œ ë¹Œë“œë˜ì—ˆë‚˜ìš”?
- [ ] ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ê³  í¬íŠ¸ ë§¤í•‘ì´ ë˜ì—ˆë‚˜ìš”?
- [ ] ë¸Œë¼ìš°ì €ì—ì„œ ì›¹ì‚¬ì´íŠ¸ì— ì ‘ì†í•  ìˆ˜ ìˆë‚˜ìš”?

#### ì¤‘ê¸‰ ì‹¤ìŠµ (ë¬¸ì œ 2)
- [ ] Node.js í”„ë¡œì íŠ¸ êµ¬ì¡°ê°€ ì˜¬ë°”ë¥¸ê°€ìš”?
- [ ] API ì—”ë“œí¬ì¸íŠ¸ë“¤ì´ ì •ìƒ ì‘ë™í•˜ë‚˜ìš”?
- [ ] ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œë¥¼ ì ìš©í–ˆë‚˜ìš”?
- [ ] .dockerignoreë¥¼ í™œìš©í–ˆë‚˜ìš”?
- [ ] ë³´ì•ˆ ëª¨ë²”ì‚¬ë¡€(non-root ì‚¬ìš©ì)ë¥¼ ì ìš©í–ˆë‚˜ìš”?

#### ê³ ê¸‰ ì‹¤ìŠµ (ë¬¸ì œ 3)
- [ ] ì›ë³¸ Dockerfileì˜ ë¬¸ì œì ì„ íŒŒì•…í–ˆë‚˜ìš”?
- [ ] ë ˆì´ì–´ ìºì‹œ ìµœì í™”ë¥¼ ì ìš©í–ˆë‚˜ìš”?
- [ ] ë¹Œë“œ ì‹œê°„ì´ í˜„ì €íˆ ê°œì„ ë˜ì—ˆë‚˜ìš”?
- [ ] ì´ë¯¸ì§€ í¬ê¸°ê°€ ìµœì í™”ë˜ì—ˆë‚˜ìš”?
- [ ] ìºì‹œ íˆíŠ¸ìœ¨ì´ í–¥ìƒë˜ì—ˆë‚˜ìš”?

---

## ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„

### 4ì¥ ì˜ˆìŠµ ê°€ì´ë“œ

ë‹¤ìŒ ì¥ì—ì„œ ë°°ìš¸ ë‚´ìš©ë“¤:
1. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ì½”ë“œì—ì„œ Docker ì´ë¯¸ì§€ê¹Œì§€**
2. **ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤**
3. **CI/CD íŒŒì´í”„ë¼ì¸ í†µí•©**
4. **ê³ ê¸‰ ì´ë¯¸ì§€ ê´€ë¦¬ ì „ëµ**

### ì¶”ê°€ ì—°ìŠµ ê³¼ì œ

ì‹œê°„ì´ ìˆë‹¤ë©´ ë„ì „í•´ë³´ì„¸ìš”:
- **Python Flask ì•± ì»¨í…Œì´ë„ˆí™”**
- **React + Node.js í’€ìŠ¤íƒ ì•± ë°°í¬**
- **ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ì• í”Œë¦¬ì¼€ì´ì…˜**
- **ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ í¬í•¨í•œ ë©€í‹° ì»¨í…Œì´ë„ˆ êµ¬ì„±**

ì¶•í•˜í•©ë‹ˆë‹¤! Docker ì´ë¯¸ì§€ ë§Œë“¤ê¸°ë¥¼ ì™„ë²½í•˜ê²Œ ë§ˆìŠ¤í„°í–ˆìŠµë‹ˆë‹¤!