---
title: '3.3 컨테이너 이미지 빌드하기'
categoryPath:
  - 'Docker'
  - '3장 도커 이미지 만들기'
  - '3.3 컨테이너 이미지 빌드하기'
authorNick: '관리자'
createdAt: '2025-08-27'
updateMode: 'upsert'
---

# 3.3 컨테이너 이미지 빌드하기

Dockerfile을 작성했다면 이제 실제 이미지로 빌드해야 합니다.  
이미지를 빌드하기 위해서는 Dockerfile과 더불어 이미지의 이름, 패키징에 필요한 파일 경로를 추가로 지정해줘야 합니다.

```bash
docker image build --tag web-ping .
```

여기에서 `--tag`의 인잣값은 이미지의 이름이고 이어지는 인자는 Dockerfile 및 이미지에 포함시킬 파일이 위치한 경로(**컨텍스트**)입니다.

<details>
<summary><strong>빌드 컨텍스트란?</strong></summary>

**빌드 컨텍스트**는 `docker build` 명령 시 도커 데몬으로 전송되는 파일들의 집합입니다.

- `.`은 현재 디렉터리의 모든 파일을 포함
- Dockerfile의 `COPY`나 `ADD` 명령은 이 컨텍스트 내의 파일만 사용 가능
- 큰 파일이나 불필요한 파일은 `.dockerignore`로 제외

```bash
# .dockerignore 예시
node_modules/
.git/
*.log
.tmp/
```

</details>

<br/>

## 빌드 명령어 구조

```bash
docker image build --tag [이미지명] [경로]
```

- `--tag` (또는 `-t`): 빌드할 이미지의 이름을 지정
- `.`: 현재 디렉터리를 빌드 컨텍스트로 사용

마지막에 `successfully built`, `successfully tagged`라는 메세지가 노출되면 빌드가 완료된 것입니다.

### 빌드된 이미지 확인

빌드된 이미지는 로컬 이미지 캐시에 저장되고 도커 명령으로 이미지 목록을 확인할 수 있습니다.

```bash
# w로 시작하는 이미지 목록 확인
docker image ls 'w*'
```

**출력 예시:**

```
REPOSITORY   TAG       IMAGE ID       CREATED          SIZE
web-ping     latest    b29fb0999b88   45 seconds ago   806MB
```

<br/>

## 빌드된 이미지 실행하기

위에서 빌드한 이미지를 통해서 컨테이너를 실행하면 동일한 애플리케이션이 동작됩니다.

```bash
docker container run web-ping
```

**실행 결과 예시:**

```
** web-ping ** Pinging: docker.com; method: HEAD; 5000ms intervals
Making request number: 1; at 1758645123456
Got response status: 200 at 1758645123567; duration: 111ms
Making request number: 2; at 1758645128456
Got response status: 200 at 1758645128502; duration: 46ms
```

<br/>

## 태그와 용어 정리

### 빌드 명령어

| 명령어                  | 설명                      | 예시                       |
| ----------------------- | ------------------------- | -------------------------- |
| `docker image build -t` | 이미지 빌드 (태그 지정)   | `docker build -t my-app .` |
| `docker image ls`       | 이미지 목록 확인          | `docker image ls`          |
| `docker history`        | 이미지 레이어 히스토리    | `docker history web-ping`  |
| `docker inspect`        | 이미지 상세 정보          | `docker inspect web-ping`  |
| `docker system df`      | 도커 시스템 디스크 사용량 | `docker system df`         |

### 주요 용어

- **빌드 컨텍스트**: `docker build` 실행 시 도커 데몬으로 전송되는 파일들
- **태그(Tag)**: 이미지에 붙이는 이름표 (예: `web-ping:latest`)
- **레이어 캐시**: 빌드 성능 향상을 위한 도커의 캐싱 메커니즘
- **로컬 이미지 캐시**: 빌드되거나 다운로드된 이미지가 저장되는 로컬 저장소

<br/>

## 연습 문제

**문제 1:** `my-app` 이름으로 현재 디렉터리의 Dockerfile을 빌드하세요.

<details>
<summary><strong>정답 보기</strong></summary>

```bash
docker image build --tag my-app .
```

</details>
<br/>

**문제 2:** 빌드한 `my-app` 이미지의 목록을 확인하세요.

<details>
<summary><strong>정답 보기</strong></summary>

```bash
docker image ls my-app
```

</details>
<br/>

**문제 3:** `my-app` 이미지로 컨테이너를 실행하되, 환경변수 `PORT=8080`을 설정하세요.

<details>
<summary><strong>정답 보기</strong></summary>

```bash
docker container run -e PORT=8080 my-app
```

</details>
<br/>
<details>
<summary><strong>빌드 문제 해결 팁</strong></summary>

### 자주 발생하는 빌드 오류

1. **"no such file or directory" 오류**
   - 빌드 컨텍스트에 파일이 없음
   - `COPY` 경로 확인 필요

2. **"permission denied" 오류**
   - 파일 권한 문제
   - Dockerfile에서 `USER` 명령 확인

3. **빌드가 너무 느림**
   - `.dockerignore` 파일로 불필요한 파일 제외
   - 레이어 순서 최적화

### 디버깅 명령어

```bash
# 캐시 없이 전체 재빌드
docker build --no-cache -t my-app .

# 빌드 과정 상세 출력
docker build --progress=plain -t my-app .

# 중간 컨테이너 유지 (디버깅용)
docker build --rm=false -t my-app .
```

</details>
